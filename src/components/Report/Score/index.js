import React, { Component } from 'react';
import classnames from 'classnames';
import { Button, Icon, Modal, Radio, Table, Tabs, Tooltip, Switch, Select } from 'antd';
import { observer, inject } from 'mobx-react';
import styles from './AdvancedView.module.css';
import { NumberInput,Hint } from 'components/Common';
import { formatNumber } from 'util'
import { observable, computed, action, toJS } from 'mobx';
import EN from '../../../constant/en';
import moment from 'moment';
import VariableImpact from "../../Modeling/Result/VariableImpact";
import FitPlot from "../../Charts/FitPlot";
import ResidualPlot from "../../Charts/ResidualPlot";
import SpeedvsAccuracys from "../../Charts/SpeedvsAccuracys";
import {LiftChart,RocChart} from "../../Charts";
import Chart from "../../Charts/Chart";
import config from 'config'
import DetailCurves from '../../Modeling/Result/AdvancedView/DetailCurves';
import MultiClassificationDetailCurves from '../../Modeling/Result/AdvancedView/MultiClassificationDetailCurves';
import AdvancedModelTable from './AdvancedModelTable';
import RowCell from './RowCell';
import ModelComp from './ModelComp';
const {isEN} = config;
const varImpactNormal = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMxcHgiIGhlaWdodD0iMzFweCIgdmlld0JveD0iMCAwIDMxIDMxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblZhcmlhYmxlSW1wYWN0TVItTm9ybWFsPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iUGFnZS0yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IjUtNC00LU1vZGVsLVNlbGVjdGlvbl9BZHZhbmNlZC1WaWV3X01vZGVsLUV4cGFuZF9ST0MtQ3VyZS1Db3B5LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzcuMDAwMDAwLCAtNDU1LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzcuMDAwMDAwLCAzMTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb25WYXJpYWJsZUltcGFjdE1SLU5vcm1hbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDE0Mi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTM1IiBzdHJva2U9IiMxRDJCM0MiIHN0cm9rZS13aWR0aD0iMS4yIiBmaWxsPSIjRkZGRkZGIiB4PSIwLjYiIHk9IjAuNiIgd2lkdGg9IjI4Ljk5MzU0ODQiIGhlaWdodD0iMjguOTkzNTQ4NCIgcng9IjEuMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Imljb25WYXJpYWJsZUltcGFjdCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUuMDk2Nzc0LCAxNS43MTEyMzApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTE1LjA5Njc3NCwgLTE1LjcxMTIzMCkgdHJhbnNsYXRlKDQuMzU0ODM5LCA0LjY3ODk3MikiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjI5MDMyMjU4LDkuODcwOTY3NzQgTDI4Ljc0MTkzNTUsOS44NzA5Njc3NCBDMjkuNTQzNjM5Miw5Ljg3MDk2Nzc0IDMwLjE5MzU0ODQsMTAuNTIwODc3IDMwLjE5MzU0ODQsMTEuMzIyNTgwNiBMMzAuMTkzNTQ4NCwxMS4zMjI1ODA2IEMzMC4xOTM1NDg0LDEyLjEyNDI4NDMgMjkuNTQzNjM5MiwxMi43NzQxOTM1IDI4Ljc0MTkzNTUsMTIuNzc0MTkzNSBMOS4yOTAzMjI1OCwxMi43NzQxOTM1IEw5LjI5MDMyMjU4LDkuODcwOTY3NzQgWiIgaWQ9IlJlY3RhbmdsZS0xMSIgZmlsbD0iIzFEMkIzQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTkuNzQxOTM1LCAxMS4zMjI1ODEpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTkuNzQxOTM1LCAtMTEuMzIyNTgxKSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4zODcwOTY3Nyw4LjEyOTAzMjI2IEwyMi4zNTQ4Mzg3LDguMTI5MDMyMjYgQzIzLjE1NjU0MjQsOC4xMjkwMzIyNiAyMy44MDY0NTE2LDguNzc4OTQxNDkgMjMuODA2NDUxNiw5LjU4MDY0NTE2IEwyMy44MDY0NTE2LDkuNTgwNjQ1MTYgQzIzLjgwNjQ1MTYsMTAuMzgyMzQ4OCAyMy4xNTY1NDI0LDExLjAzMjI1ODEgMjIuMzU0ODM4NywxMS4wMzIyNTgxIEw2LjM4NzA5Njc3LDExLjAzMjI1ODEgTDYuMzg3MDk2NzcsOC4xMjkwMzIyNiBaIiBpZD0iUmVjdGFuZ2xlLTExLUNvcHkiIGZpbGw9IiMxRDJCM0MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1LjA5Njc3NCwgOS41ODA2NDUpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTUuMDk2Nzc0LCAtOS41ODA2NDUpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjgwNjQ1MTYxLDQuMDY0NTE2MTMgTDEzLjY0NTE2MTMsNC4wNjQ1MTYxMyBDMTQuNDQ2ODY1LDQuMDY0NTE2MTMgMTUuMDk2Nzc0Miw0LjcxNDQyNTM2IDE1LjA5Njc3NDIsNS41MTYxMjkwMyBMMTUuMDk2Nzc0Miw1LjUxNjEyOTAzIEMxNS4wOTY3NzQyLDYuMzE3ODMyNyAxNC40NDY4NjUsNi45Njc3NDE5NCAxMy42NDUxNjEzLDYuOTY3NzQxOTQgTDUuODA2NDUxNjEsNi45Njc3NDE5NCBMNS44MDY0NTE2MSw0LjA2NDUxNjEzIFoiIGlkPSJSZWN0YW5nbGUtMTEtQ29weS0yIiBmaWxsPSIjMUQyQjNDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMC40NTE2MTMsIDUuNTE2MTI5KSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTEwLjQ1MTYxMywgLTUuNTE2MTI5KSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS43NDE5MzU0OCwzLjQ4Mzg3MDk3IEw5LDMuNDgzODcwOTcgQzkuODAxNzAzNjcsMy40ODM4NzA5NyAxMC40NTE2MTI5LDQuMTMzNzgwMiAxMC40NTE2MTI5LDQuOTM1NDgzODcgTDEwLjQ1MTYxMjksNC45MzU0ODM4NyBDMTAuNDUxNjEyOSw1LjczNzE4NzU0IDkuODAxNzAzNjcsNi4zODcwOTY3NyA5LDYuMzg3MDk2NzcgTDEuNzQxOTM1NDgsNi4zODcwOTY3NyBMMS43NDE5MzU0OCwzLjQ4Mzg3MDk3IFoiIGlkPSJSZWN0YW5nbGUtMTEtQ29weS0zIiBmaWxsPSIjMUQyQjNDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjA5Njc3NCwgNC45MzU0ODQpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtNi4wOTY3NzQsIC00LjkzNTQ4NCkgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTS0xLjE2MTI5MDMyLDIuMzIyNTgwNjUgTDMuMTkzNTQ4MzksMi4zMjI1ODA2NSBDMy45OTUyNTIwNiwyLjMyMjU4MDY1IDQuNjQ1MTYxMjksMi45NzI0ODk4OCA0LjY0NTE2MTI5LDMuNzc0MTkzNTUgTDQuNjQ1MTYxMjksMy43NzQxOTM1NSBDNC42NDUxNjEyOSw0LjU3NTg5NzIyIDMuOTk1MjUyMDYsNS4yMjU4MDY0NSAzLjE5MzU0ODM5LDUuMjI1ODA2NDUgTC0xLjE2MTI5MDMyLDUuMjI1ODA2NDUgTC0xLjE2MTI5MDMyLDIuMzIyNTgwNjUgWiIgaWQ9IlJlY3RhbmdsZS0xMS1Db3B5LTQiIGZpbGw9IiMxRDJCM0MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNzQxOTM1LCAzLjc3NDE5NCkgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xLjc0MTkzNSwgLTMuNzc0MTk0KSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDAuMDAwMDAwKSIgc3Ryb2tlPSIjMUQyQjNDIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjEuMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjE0NzM3NDkyLDEuMTQxMjc5OTkgTDIxLjA1MDYwMDcsMS4xNDEyNzk5OSIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4NCg=='
const varImpactHover = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1MiI+DQogICAgPGRlZnM+DQogICAgICAgIDxyZWN0IGlkPSJhIiB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyIi8+DQogICAgPC9kZWZzPg0KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnPg0KICAgICAgICAgICAgPHVzZSBmaWxsPSIjRTZGMUZGIiB4bGluazpocmVmPSIjYSIvPg0KICAgICAgICAgICAgPHJlY3Qgd2lkdGg9IjUxIiBoZWlnaHQ9IjUxIiB4PSIuNSIgeT0iLjUiIHN0cm9rZT0iIzQ0OEVFRCIgcng9IjIiLz4NCiAgICAgICAgPC9nPg0KICAgICAgICA8cGF0aCBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIGQ9Ik0yNC45NjYgNDUuMzA0di0zNiIvPg0KICAgICAgICA8cGF0aCBmaWxsPSIjNDQ4RUVEIiBkPSJNMjUuNSA5LjA1OEgzOWEyLjUgMi41IDAgMSAxIDAgNUgyNS41di01ek0yNS41IDE2LjA1OEgzNWEyLjUgMi41IDAgMSAxIDAgNWgtOS41di01ek0yNC41IDIzLjA1OEgzMGEyLjUgMi41IDAgMSAxIDAgNWgtNS41di01ek0xMi41IDQ1LjU1OEgyNXYtNUgxMi41YTIuNSAyLjUgMCAwIDAgMCA1ek0xOCAzOS4wNThoNy41di01SDE4YTIuNSAyLjUgMCAwIDAgMCA1eiIvPg0KICAgIDwvZz4NCjwvc3ZnPg0K'
const varImpactSelected = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMxcHgiIGhlaWdodD0iMzFweCIgdmlld0JveD0iMCAwIDMxIDMxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblZhcmlhYmxlSW1wYWN0TVItTm9ybWFsPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iUGFnZS0yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IjUtNC00LU1vZGVsLVNlbGVjdGlvbl9BZHZhbmNlZC1WaWV3X01vZGVsLUV4cGFuZF9ST0MtQ3VyZS1Db3B5LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzcuMDAwMDAwLCAtNDU1LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzcuMDAwMDAwLCAzMTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb25WYXJpYWJsZUltcGFjdE1SLU5vcm1hbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDE0Mi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTM1IiBzdHJva2U9IiMxRDJCM0MiIHN0cm9rZS13aWR0aD0iMS4yIiBmaWxsPSIjMUQyQjNDIiB4PSIwLjYiIHk9IjAuNiIgd2lkdGg9IjI4Ljk5MzU0ODQiIGhlaWdodD0iMjguOTkzNTQ4NCIgcng9IjEuMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Imljb25WYXJpYWJsZUltcGFjdCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUuMDk2Nzc0LCAxNS43MTEyMzApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTE1LjA5Njc3NCwgLTE1LjcxMTIzMCkgdHJhbnNsYXRlKDQuMzU0ODM5LCA0LjY3ODk3MikiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjI5MDMyMjU4LDkuODcwOTY3NzQgTDI4Ljc0MTkzNTUsOS44NzA5Njc3NCBDMjkuNTQzNjM5Miw5Ljg3MDk2Nzc0IDMwLjE5MzU0ODQsMTAuNTIwODc3IDMwLjE5MzU0ODQsMTEuMzIyNTgwNiBMMzAuMTkzNTQ4NCwxMS4zMjI1ODA2IEMzMC4xOTM1NDg0LDEyLjEyNDI4NDMgMjkuNTQzNjM5MiwxMi43NzQxOTM1IDI4Ljc0MTkzNTUsMTIuNzc0MTkzNSBMOS4yOTAzMjI1OCwxMi43NzQxOTM1IEw5LjI5MDMyMjU4LDkuODcwOTY3NzQgWiIgaWQ9IlJlY3RhbmdsZS0xMSIgZmlsbD0iI2ZmZiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTkuNzQxOTM1LCAxMS4zMjI1ODEpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTkuNzQxOTM1LCAtMTEuMzIyNTgxKSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4zODcwOTY3Nyw4LjEyOTAzMjI2IEwyMi4zNTQ4Mzg3LDguMTI5MDMyMjYgQzIzLjE1NjU0MjQsOC4xMjkwMzIyNiAyMy44MDY0NTE2LDguNzc4OTQxNDkgMjMuODA2NDUxNiw5LjU4MDY0NTE2IEwyMy44MDY0NTE2LDkuNTgwNjQ1MTYgQzIzLjgwNjQ1MTYsMTAuMzgyMzQ4OCAyMy4xNTY1NDI0LDExLjAzMjI1ODEgMjIuMzU0ODM4NywxMS4wMzIyNTgxIEw2LjM4NzA5Njc3LDExLjAzMjI1ODEgTDYuMzg3MDk2NzcsOC4xMjkwMzIyNiBaIiBpZD0iUmVjdGFuZ2xlLTExLUNvcHkiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1LjA5Njc3NCwgOS41ODA2NDUpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTUuMDk2Nzc0LCAtOS41ODA2NDUpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01LjgwNjQ1MTYxLDQuMDY0NTE2MTMgTDEzLjY0NTE2MTMsNC4wNjQ1MTYxMyBDMTQuNDQ2ODY1LDQuMDY0NTE2MTMgMTUuMDk2Nzc0Miw0LjcxNDQyNTM2IDE1LjA5Njc3NDIsNS41MTYxMjkwMyBMMTUuMDk2Nzc0Miw1LjUxNjEyOTAzIEMxNS4wOTY3NzQyLDYuMzE3ODMyNyAxNC40NDY4NjUsNi45Njc3NDE5NCAxMy42NDUxNjEzLDYuOTY3NzQxOTQgTDUuODA2NDUxNjEsNi45Njc3NDE5NCBMNS44MDY0NTE2MSw0LjA2NDUxNjEzIFoiIGlkPSJSZWN0YW5nbGUtMTEtQ29weS0yIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMC40NTE2MTMsIDUuNTE2MTI5KSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTEwLjQ1MTYxMywgLTUuNTE2MTI5KSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS43NDE5MzU0OCwzLjQ4Mzg3MDk3IEw5LDMuNDgzODcwOTcgQzkuODAxNzAzNjcsMy40ODM4NzA5NyAxMC40NTE2MTI5LDQuMTMzNzgwMiAxMC40NTE2MTI5LDQuOTM1NDgzODcgTDEwLjQ1MTYxMjksNC45MzU0ODM4NyBDMTAuNDUxNjEyOSw1LjczNzE4NzU0IDkuODAxNzAzNjcsNi4zODcwOTY3NyA5LDYuMzg3MDk2NzcgTDEuNzQxOTM1NDgsNi4zODcwOTY3NyBMMS43NDE5MzU0OCwzLjQ4Mzg3MDk3IFoiIGlkPSJSZWN0YW5nbGUtMTEtQ29weS0zIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2LjA5Njc3NCwgNC45MzU0ODQpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtNi4wOTY3NzQsIC00LjkzNTQ4NCkgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTS0xLjE2MTI5MDMyLDIuMzIyNTgwNjUgTDMuMTkzNTQ4MzksMi4zMjI1ODA2NSBDMy45OTUyNTIwNiwyLjMyMjU4MDY1IDQuNjQ1MTYxMjksMi45NzI0ODk4OCA0LjY0NTE2MTI5LDMuNzc0MTkzNTUgTDQuNjQ1MTYxMjksMy43NzQxOTM1NSBDNC42NDUxNjEyOSw0LjU3NTg5NzIyIDMuOTk1MjUyMDYsNS4yMjU4MDY0NSAzLjE5MzU0ODM5LDUuMjI1ODA2NDUgTC0xLjE2MTI5MDMyLDUuMjI1ODA2NDUgTC0xLjE2MTI5MDMyLDIuMzIyNTgwNjUgWiIgaWQ9IlJlY3RhbmdsZS0xMS1Db3B5LTQiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNzQxOTM1LCAzLjc3NDE5NCkgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC0xLjc0MTkzNSwgLTMuNzc0MTk0KSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDAuMDAwMDAwKSIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjEuMiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjE0NzM3NDkyLDEuMTQxMjc5OTkgTDIxLjA1MDYwMDcsMS4xNDEyNzk5OSIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4NCg=='
const FitPlotHover = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjU2cHgiIGhlaWdodD0iNTZweCIgdmlld0JveD0iMCAwIDU2IDU2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDcuMSAoNDU0MjIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5pY29uTVItRml0UGxvdC1Ib3ZlcjwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+DQogICAgICAgIDxyZWN0IGlkPSJwYXRoLTEiIHg9IjAuNzE2NDY0MjA3IiB5PSIwIiB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyIj48L3JlY3Q+DQogICAgPC9kZWZzPg0KICAgIDxnIGlkPSIyMDE3MTExNC1SZWdyZXNzaW9uLUFkdmFuY2VWaWV3MiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJpY29uTVItRml0UGxvdC1Ib3ZlciI+DQogICAgICAgICAgICA8ZyBpZD0iaWNvblJPQ0N1cnZlLUhvdmVyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjAwMDAwMCwgMi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIj4NCiAgICAgICAgICAgICAgICAgICAgPHVzZSBmaWxsPSIjRjNGOEZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS13aWR0aD0iMSIgeD0iMS4yMTY0NjQyMSIgeT0iMC41IiB3aWR0aD0iNTEiIGhlaWdodD0iNTEiIHJ4PSIyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDxnIGlkPSJST0NDdXJ2ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC4yMzkzMzgsIDcuMDEwMDY3KSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlPSIjNDQ4RUVEIj4NCiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkFycm93Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0yLjA4OTY4NzI3LDAuMzc1NjI5MTkyIEwzLjc2MTQzNzA4LDEuODc4MTQ1OTYiIGlkPSJMaW5lIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC40MTc5Mzc0NTQsMC4zNzU2MjkxOTIgTDIuMDg5Njg3MjcsMS44NzgxNDU5NiIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjI1MzgxMiwgMS4xMjY4ODgpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTEuMjUzODEyLCAtMS4xMjY4ODgpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJBcnJvdy1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0My40OTI1MDQsIDM5LjA3NzMzMCkgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC00My40OTI1MDQsIC0zOS4wNzczMzApIHRyYW5zbGF0ZSg0MC45OTI1MDQsIDM3LjU3NzMzMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMDg5Njg3MjcsMC4zNzU2MjkxOTIgTDMuNzYxNDM3MDgsMS44NzgxNDU5NiIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjQxNzkzNzQ1NCwwLjM3NTYyOTE5MiBMMi4wODk2ODcyNywxLjg3ODE0NTk2IiBpZD0iTGluZS1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMjUzODEyLCAxLjEyNjg4OCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMS4yNTM4MTIsIC0xLjEyNjg4OCkgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMDg5Njg3MjcsMzguNjg5ODA2NyBMNDMuODgzNDMyNywzOC42ODk4MDY3IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi4wODk2ODcyNywzOC42ODk4MDY3IEwyLjA4OTY4NzI3LDEuMTI2ODg3NTciIGlkPSJMaW5lLUNvcHkiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNjY4NTU0NjksNDQuNTYyOTg4MyBMNDYuNDQ0NzI2NiwxMC42Mjg0MTgiIGlkPSJMaW5lLTQiIHN0cm9rZT0iIzQ0OEVFRCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0iUGF0aC00IiBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtZGFzaGFycmF5PSIxLDciIHBvaW50cz0iMTEgMzcuNjIzMDQ2OSAxNi4zNDg0Mzc1IDM1LjEwOTM3NSAyMS42OTY4NzUgMjUuMDU0Njg3NSAyNC4zNzEwOTM4IDMxLjMzODg2NzIgMzYuNDA1MDc4MSAxOC43NzA1MDc4IDI0LjM3MTA5MzggMjIuNTQxMDE1NiAzMS4wNTY2NDA2IDI1LjA1NDY4NzUgMjQuMzcxMDkzOCAzNy42MjMwNDY5IDM5LjA3OTI5NjkgMjIuNTQxMDE1NiA0NC40Mjc3MzQ0IDE1Ij48L3BvbHlsaW5lPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+'
const FitPlotNormal = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzFweCIgdmlld0JveD0iMCAwIDMwIDMxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblJPQ0N1cnZlLVNlbGVjdGVkPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iUGFnZS0yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IjUtNC00LU1vZGVsLVNlbGVjdGlvbl9BZHZhbmNlZC1WaWV3X01vZGVsLUV4cGFuZF9ST0MtQ3VyZS1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTc3LjAwMDAwMCwgLTMxMy4wMDAwMDApIiBzdHJva2U9IiMxRDJCM0MiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzcuMDAwMDAwLCAzMTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb25GaXRQbG90LU5vcm1hbCI+DQogICAgICAgICAgICAgICAgICAgIDxnPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS03LUNvcHktMyIgc3Ryb2tlLXdpZHRoPSIxLjIiIGZpbGw9IiNGRkZGRkYiIHg9IjEuMDAzMDExMTIiIHk9IjAuNiIgd2lkdGg9IjI4LjA1IiBoZWlnaHQ9IjI4Ljk5MzU0ODQiIHJ4PSIyLjQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJST0NDdXJ2ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4zODQ2MjgsIDQuMDcwMzYyKSI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkFycm93IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDAuMjE4MTA3MjczIEwyLjExNTgwODM2LDEuMDkwNTM2MzYiIGlkPSJMaW5lIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjIzNTA4OTgxOCwwLjIxODEwNzI3MyBMMS4xNzU0NDkwOSwxLjA5MDUzNjM2IiBpZD0iTGluZS1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNzA1MjY5LCAwLjY1NDMyMikgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMC43MDUyNjksIC0wLjY1NDMyMikgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJBcnJvdy1Db3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNC40NjQ1MzQsIDIyLjY5MDA2Mykgcm90YXRlKDkwLjAwMDAwMCkgdHJhbnNsYXRlKC0yNC40NjQ1MzQsIC0yMi42OTAwNjMpIHRyYW5zbGF0ZSgyMy4wNTgyODQsIDIxLjgxOTA5NSkiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS13aWR0aD0iMC42Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMC4yMTgxMDcyNzMgTDIuMTE1ODA4MzYsMS4wOTA1MzYzNiIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuMjM1MDg5ODE4LDAuMjE4MTA3MjczIEwxLjE3NTQ0OTA5LDEuMDkwNTM2MzYiIGlkPSJMaW5lLUNvcHktMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43MDUyNjksIDAuNjU0MzIyKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0wLjcwNTI2OSwgLTAuNjU0MzIyKSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMjIuNDY1MDQ5MSBMMjQuNjg0NDMwOSwyMi40NjUwNDkxIiBpZD0iTGluZSIgc3Ryb2tlLXdpZHRoPSIwLjYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwyMi40NjUwNDkxIEwxLjE3NTQ0OTA5LDAuNjU0MzIxODE4IiBpZD0iTGluZS1Db3B5IiBzdHJva2Utd2lkdGg9IjAuNiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjcxNzk5NjY4LDIyLjAyMDM5NTggTDIzLjUyOTU5MzQsMi4zMTY0NTE3MyIgaWQ9IkxpbmUtNCIgc3Ryb2tlLXdpZHRoPSIwLjkiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy41OTgzMDY3MywxNy40MjU5ODQyIEw2LjYwNjgwMjgzLDE1Ljk2NjQzMjggTDkuNjE1Mjk4OTIsMTAuMTI4MjI3MiBMMTEuMTE5NTQ3LDEzLjc3NzEwNTcgTDE3Ljg4ODY2MzIsNi40NzkzNDg2NiBMMTEuMTE5NTQ3LDguNjY4Njc1NzggTDE0Ljg4MDE2NzEsMTAuMTI4MjI3MiBMMTEuMTE5NTQ3LDE3LjQyNTk4NDIgTDE5LjM5MjkxMTIsOC42Njg2NzU3OCBMMjIuNDAxNDA3Myw0LjI5MDAyMTU0IiBpZD0iUGF0aC00IiBzdHJva2Utd2lkdGg9IjEuMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtZGFzaGFycmF5PSIwLjYsNC4yIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTctQ29weS0zIiBzdHJva2Utd2lkdGg9IjEuMiIgZmlsbD0iI0ZGRkZGRiIgeD0iMS4wMDMwMTExMiIgeT0iMC42IiB3aWR0aD0iMjguMDUiIGhlaWdodD0iMjguOTkzNTQ4NCIgcng9IjIuNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJPQ0N1cnZlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjM4NDYyOCwgNC4wNzAzNjIpIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ciIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS13aWR0aD0iMC42Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMC4yMTgxMDcyNzMgTDIuMTE1ODA4MzYsMS4wOTA1MzYzNiIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuMjM1MDg5ODE4LDAuMjE4MTA3MjczIEwxLjE3NTQ0OTA5LDEuMDkwNTM2MzYiIGlkPSJMaW5lLUNvcHktMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43MDUyNjksIDAuNjU0MzIyKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC0wLjcwNTI2OSwgLTAuNjU0MzIyKSAiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkFycm93LUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0LjQ2NDUzNCwgMjIuNjkwMDYzKSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTI0LjQ2NDUzNCwgLTIyLjY5MDA2MykgdHJhbnNsYXRlKDIzLjA1ODI4NCwgMjEuODE5MDk1KSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLXdpZHRoPSIwLjYiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwwLjIxODEwNzI3MyBMMi4xMTU4MDgzNiwxLjA5MDUzNjM2IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMTgxMDcyNzMgTDEuMTc1NDQ5MDksMS4wOTA1MzYzNiIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42NTQzMjIpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42NTQzMjIpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwyMi40NjUwNDkxIEwyNC42ODQ0MzA5LDIyLjQ2NTA0OTEiIGlkPSJMaW5lIiBzdHJva2Utd2lkdGg9IjAuNiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDIyLjQ2NTA0OTEgTDEuMTc1NDQ5MDksMC42NTQzMjE4MTgiIGlkPSJMaW5lLUNvcHkiIHN0cm9rZS13aWR0aD0iMC42IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuNzE3OTk2NjgsMjIuMDIwMzk1OCBMMjMuNTI5NTkzNCwyLjMxNjQ1MTczIiBpZD0iTGluZS00IiBzdHJva2Utd2lkdGg9IjAuOSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjU5ODMwNjczLDE3LjQyNTk4NDIgTDYuNjA2ODAyODMsMTUuOTY2NDMyOCBMOS42MTUyOTg5MiwxMC4xMjgyMjcyIEwxMS4xMTk1NDcsMTMuNzc3MTA1NyBMMTcuODg4NjYzMiw2LjQ3OTM0ODY2IEwxMS4xMTk1NDcsOC42Njg2NzU3OCBMMTQuODgwMTY3MSwxMC4xMjgyMjcyIEwxMS4xMTk1NDcsMTcuNDI1OTg0MiBMMTkuMzkyOTExMiw4LjY2ODY3NTc4IEwyMi40MDE0MDczLDQuMjkwMDIxNTQiIGlkPSJQYXRoLTQiIHN0cm9rZS13aWR0aD0iMS4yIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1kYXNoYXJyYXk9IjAuNiw0LjIiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg0K'
const FitPlotSelected = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzFweCIgdmlld0JveD0iMCAwIDMwIDMxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblJPQ0N1cnZlLVNlbGVjdGVkPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZyBpZD0iUGFnZS0yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IjUtNC00LU1vZGVsLVNlbGVjdGlvbl9BZHZhbmNlZC1WaWV3X01vZGVsLUV4cGFuZF9ST0MtQ3VyZS1Db3B5LTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNzcuMDAwMDAwLCAtMzEzLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzcuMDAwMDAwLCAzMTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb25GaXRQbG90LU5vcm1hbC1Db3B5Ij4NCiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Imljb25GaXRQbG90LU5vcm1hbCIgc3Ryb2tlPSIjMUQyQjNDIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtNy1Db3B5LTMiIHN0cm9rZS13aWR0aD0iMS4yIiBmaWxsPSIjRkZGRkZGIiB4PSIxLjAwMzAxMTEyIiB5PSIwLjYiIHdpZHRoPSIyOC4wNSIgaGVpZ2h0PSIyOC45OTM1NDg0IiByeD0iMi40Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iUk9DQ3VydmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMzg0NjI4LCA0LjA3MDM2MikiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJBcnJvdyIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLXdpZHRoPSIwLjYiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwwLjIxODEwNzI3MyBMMi4xMTU4MDgzNiwxLjA5MDUzNjM2IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMTgxMDcyNzMgTDEuMTc1NDQ5MDksMS4wOTA1MzYzNiIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42NTQzMjIpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42NTQzMjIpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ctQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuNDY0NTM0LCAyMi42OTAwNjMpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMjQuNDY0NTM0LCAtMjIuNjkwMDYzKSB0cmFuc2xhdGUoMjMuMDU4Mjg0LCAyMS44MTkwOTUpIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDAuMjE4MTA3MjczIEwyLjExNTgwODM2LDEuMDkwNTM2MzYiIGlkPSJMaW5lIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjIzNTA4OTgxOCwwLjIxODEwNzI3MyBMMS4xNzU0NDkwOSwxLjA5MDUzNjM2IiBpZD0iTGluZS1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNzA1MjY5LCAwLjY1NDMyMikgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMC43MDUyNjksIC0wLjY1NDMyMikgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDIyLjQ2NTA0OTEgTDI0LjY4NDQzMDksMjIuNDY1MDQ5MSIgaWQ9IkxpbmUiIHN0cm9rZS13aWR0aD0iMC42IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMjIuNDY1MDQ5MSBMMS4xNzU0NDkwOSwwLjY1NDMyMTgxOCIgaWQ9IkxpbmUtQ29weSIgc3Ryb2tlLXdpZHRoPSIwLjYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS43MTc5OTY2OCwyMi4wMjAzOTU4IEwyMy41Mjk1OTM0LDIuMzE2NDUxNzMiIGlkPSJMaW5lLTQiIHN0cm9rZS13aWR0aD0iMC45IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuNTk4MzA2NzMsMTcuNDI1OTg0MiBMNi42MDY4MDI4MywxNS45NjY0MzI4IEw5LjYxNTI5ODkyLDEwLjEyODIyNzIgTDExLjExOTU0NywxMy43NzcxMDU3IEwxNy44ODg2NjMyLDYuNDc5MzQ4NjYgTDExLjExOTU0Nyw4LjY2ODY3NTc4IEwxNC44ODAxNjcxLDEwLjEyODIyNzIgTDExLjExOTU0NywxNy40MjU5ODQyIEwxOS4zOTI5MTEyLDguNjY4Njc1NzggTDIyLjQwMTQwNzMsNC4yOTAwMjE1NCIgaWQ9IlBhdGgtNCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iMC42LDQuMiI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJpY29uRml0UGxvdC1Ob3JtYWwiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS03LUNvcHktMyIgc3Ryb2tlPSIjMUQyQjNDIiBzdHJva2Utd2lkdGg9IjEuMiIgZmlsbD0iIzFEMkIzQyIgeD0iMS4wMDMwMTExMiIgeT0iMC42IiB3aWR0aD0iMjguMDUiIGhlaWdodD0iMjguOTkzNTQ4NCIgcng9IjIuNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IlJPQ0N1cnZlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyLjM4NDYyOCwgNC4wNzAzNjIpIiBzdHJva2U9IiNGRkZGRkYiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJBcnJvdyIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLXdpZHRoPSIwLjYiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwwLjIxODEwNzI3MyBMMi4xMTU4MDgzNiwxLjA5MDUzNjM2IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMTgxMDcyNzMgTDEuMTc1NDQ5MDksMS4wOTA1MzYzNiIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42NTQzMjIpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42NTQzMjIpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ctQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjQuNDY0NTM0LCAyMi42OTAwNjMpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMjQuNDY0NTM0LCAtMjIuNjkwMDYzKSB0cmFuc2xhdGUoMjMuMDU4Mjg0LCAyMS44MTkwOTUpIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDAuMjE4MTA3MjczIEwyLjExNTgwODM2LDEuMDkwNTM2MzYiIGlkPSJMaW5lIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjIzNTA4OTgxOCwwLjIxODEwNzI3MyBMMS4xNzU0NDkwOSwxLjA5MDUzNjM2IiBpZD0iTGluZS1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNzA1MjY5LCAwLjY1NDMyMikgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMC43MDUyNjksIC0wLjY1NDMyMikgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjE3NTQ0OTA5LDIyLjQ2NTA0OTEgTDI0LjY4NDQzMDksMjIuNDY1MDQ5MSIgaWQ9IkxpbmUiIHN0cm9rZS13aWR0aD0iMC42IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMjIuNDY1MDQ5MSBMMS4xNzU0NDkwOSwwLjY1NDMyMTgxOCIgaWQ9IkxpbmUtQ29weSIgc3Ryb2tlLXdpZHRoPSIwLjYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS43MTc5OTY2OCwyMi4wMjAzOTU4IEwyMy41Mjk1OTM0LDIuMzE2NDUxNzMiIGlkPSJMaW5lLTQiIHN0cm9rZS13aWR0aD0iMC45IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuNTk4MzA2NzMsMTcuNDI1OTg0MiBMNi42MDY4MDI4MywxNS45NjY0MzI4IEw5LjYxNTI5ODkyLDEwLjEyODIyNzIgTDExLjExOTU0NywxMy43NzcxMDU3IEwxNy44ODg2NjMyLDYuNDc5MzQ4NjYgTDExLjExOTU0Nyw4LjY2ODY3NTc4IEwxNC44ODAxNjcxLDEwLjEyODIyNzIgTDExLjExOTU0NywxNy40MjU5ODQyIEwxOS4zOTI5MTEyLDguNjY4Njc1NzggTDIyLjQwMTQwNzMsNC4yOTAwMjE1NCIgaWQ9IlBhdGgtNCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iMC42LDQuMiI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+DQo='
const ResidualHover = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjU2cHgiIGhlaWdodD0iNTZweCIgdmlld0JveD0iMCAwIDU2IDU2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDcuMSAoNDU0MjIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5pY29uTVItUmVzaWR1YWwtSG92ZXI8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8cmVjdCBpZD0icGF0aC0xIiB4PSIwLjE0ODg3NTY0NiIgeT0iMC4wNTgyMjkxNTE5IiB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyIj48L3JlY3Q+DQogICAgPC9kZWZzPg0KICAgIDxnIGlkPSIyMDE3MTExNC1SZWdyZXNzaW9uLUFkdmFuY2VWaWV3MiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJpY29uTVItUmVzaWR1YWwtSG92ZXIiPg0KICAgICAgICAgICAgPGcgaWQ9Imljb25DdXRvZmZSYXRpby1Ib3ZlciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4wMDAwMDAsIDIuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9IlJlY3RhbmdsZS03LUNvcHkiPg0KICAgICAgICAgICAgICAgICAgICA8dXNlIGZpbGw9IiNGM0Y4RkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IHN0cm9rZT0iIzQ0OEVFRCIgc3Ryb2tlLXdpZHRoPSIxIiB4PSIwLjY0ODg3NTY0NiIgeT0iMC41NTgyMjkxNTIiIHdpZHRoPSI1MSIgaGVpZ2h0PSI1MSIgcng9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPGcgaWQ9IkFycm93IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0LjAwMDAwMCwgNi4wMDAwMDApIiBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi4wODk2ODcyNywwLjM3MTM2MDY3OCBMMy43NjE0MzcwOCwxLjg1NjgwMzM5IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC40MTc5Mzc0NTQsMC4zNzEzNjA2NzggTDIuMDg5Njg3MjcsMS44NTY4MDMzOSIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjI1MzgxMiwgMS4xMTQwODIpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTEuMjUzODEyLCAtMS4xMTQwODIpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ctQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDcuNDc4OTczLCA0NC42Mzc2NzMpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtNDcuNDc4OTczLCAtNDQuNjM3NjczKSB0cmFuc2xhdGUoNDQuOTc4OTczLCA0My4xMzc2NzMpIiBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi4wODk2ODcyNywwLjM3MTM2MDY3OCBMMy43NjE0MzcwOCwxLjg1NjgwMzM5IiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC40MTc5Mzc0NTQsMC4zNzEzNjA2NzggTDIuMDg5Njg3MjcsMS44NTY4MDMzOSIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjI1MzgxMiwgMS4xMTQwODIpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTEuMjUzODEyLCAtMS4xMTQwODIpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4wODk2ODcyNyw0NC4yNTAxNDk4IEw0Ny44ODM0MzI3LDQ0LjI1MDE0OTgiIGlkPSJMaW5lIiBzdHJva2U9IiM0NDhFRUQiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4wODk2ODcyNyw0NC4yNTAxNDk4IEw2LjA4OTY4NzI3LDcuMTE0MDgyMDMiIGlkPSJMaW5lLUNvcHkiIHN0cm9rZT0iIzQ0OEVFRCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjczMTQ0NTMxLDI2LjUgTDQ3LjY5MjM4MjgsMjYuNSIgaWQ9IkxpbmUtNCIgc3Ryb2tlPSIjNDQ4RUVEIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJQYXRoLTQiIHN0cm9rZT0iIzQ0OEVFRCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1kYXNoYXJyYXk9IjEsNyIgcG9pbnRzPSIxMy44MTI1MDY0IDIxLjQzODg0NyAxOC4yMDExNzgzIDMyLjkwMTY3MDMgMjQuMDUyNzQwOCAyMy43MzE0MTE2IDI2Ljk3ODUyMiAyOS40NjI4MjMzIDM1Ljc1NTg2NTggMTggMjEuMTI2OTU5NSAxOCAzNS43NTU4NjU4IDMyLjkwMTY3MDMgMjQuNzg0MTg2MSAzNS4xOTQyMzQ5IDQzLjA3MDMxODkgMjEuNDM4ODQ3IDQzLjA3MDMxODkgMjkuNDYyODIzMyI+PC9wb2x5bGluZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=='
const ResidualNormal = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzBweCIgdmlld0JveD0iMCAwIDMwIDMwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblJlc2lkdWFsLU5vcm1hbDwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlBhZ2UtMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSI1LTQtNC1Nb2RlbC1TZWxlY3Rpb25fQWR2YW5jZWQtVmlld19Nb2RlbC1FeHBhbmRfUk9DLUN1cmUtQ29weS0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTc3LjAwMDAwMCwgLTM2MC4wMDAwMDApIiBzdHJva2U9IiMxRDJCM0MiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzcuMDAwMDAwLCAzMTMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Imljb25SZXNpZHVhbC1Ob3JtYWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCA0Ny4zMzMzMzMpIj4NCiAgICAgICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42ODM3NDI1NTEsMi40MjY0MDQxNiBMMC42ODM3NDI1NTEsMjYuODg5MTAzNiBDMC42ODM3NDI1NTEsMjcuODc3MjIxNyAxLjQ4ODMzNjk2LDI4LjY4Mjc1MzkgMi40NzczOTI4MSwyOC42ODI3NTM5IEwyNi45NDAwOTIzLDI4LjY4Mjc1MzkgQzI3LjkyODIxMDQsMjguNjgyNzUzOSAyOC43MzM3NDI2LDI3Ljg3ODE1OTUgMjguNzMzNzQyNiwyNi44ODkxMDM2IEwyOC43MzM3NDI2LDIuNDI2NDA0MTYgQzI4LjczMzc0MjYsMS40MzgyODYwNiAyNy45MjkxNDgxLDAuNjMyNzUzODk4IDI2Ljk0MDA5MjMsMC42MzI3NTM4OTggTDIuNDc3MzkyODEsMC42MzI3NTM4OTggQzEuNDg5Mjc0NzEsMC42MzI3NTM4OTggMC42ODM3NDI1NTEsMS40MzczNDgzIDAuNjgzNzQyNTUxLDIuNDI2NDA0MTYgWiIgaWQ9IlJlY3RhbmdsZS03LUNvcHkiIHN0cm9rZS13aWR0aD0iMS4yIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuMjUwMDAwLCAzLjM3NTAwMCkiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS13aWR0aD0iMC42Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMS4xNzU0NDkwOSwwLjIwODg5MDM4MSBMMi4xMTU4MDgzNiwxLjA0NDQ1MTkxIiBpZD0iTGluZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLjIzNTA4OTgxOCwwLjIwODg5MDM4MSBMMS4xNzU0NDkwOSwxLjA0NDQ1MTkxIiBpZD0iTGluZS1Db3B5LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNzA1MjY5LCAwLjYyNjY3MSkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtMC43MDUyNjksIC0wLjYyNjY3MSkgIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iQXJyb3ctQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNzA2OTIzLCAyNS4xMDg2OTEpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMjYuNzA2OTIzLCAtMjUuMTA4NjkxKSB0cmFuc2xhdGUoMjUuMzAwNjczLCAyNC4yNjQ5NDEpIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMC4yMDg4OTAzODEgTDIuMTE1ODA4MzYsMS4wNDQ0NTE5MSIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMDg4OTAzODEgTDEuMTc1NDQ5MDksMS4wNDQ0NTE5MSIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42MjY2NzEpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42MjY2NzEpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuNDI1NDQ5MDksMjQuODkwNzA5MyBMMjYuOTM0NDMwOSwyNC44OTA3MDkzIiBpZD0iTGluZSIgc3Ryb2tlLXdpZHRoPSIwLjYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjQyNTQ0OTA5LDI0Ljg5MDcwOTMgTDMuNDI1NDQ5MDksNC4wMDE2NzExNCIgaWQ9IkxpbmUtQ29weSIgc3Ryb2tlLXdpZHRoPSIwLjYiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLjc4NjQzNzk5LDE0LjkwNjI1IEwyNi44MjY5NjUzLDE0LjkwNjI1IiBpZD0iTGluZS00IiBzdHJva2Utd2lkdGg9IjAuOSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNzY5NTM0ODYsMTIuMDU5MzUxNCBMMTAuMjM4MTYyOCwxOC41MDcxODk1IEwxMy41Mjk2NjY3LDEzLjM0ODkxOSBMMTUuMTc1NDE4NywxNi41NzI4MzgxIEwyMC4xMTI2NzQ1LDEwLjEyNSBMMTEuODgzOTE0NywxMC4xMjUgTDIwLjExMjY3NDUsMTguNTA3MTg5NSBMMTMuOTQxMTA0NywxOS43OTY3NTcxIEwyNC4yMjcwNTQ0LDEyLjA1OTM1MTQgTDI0LjIyNzA1NDQsMTYuNTcyODM4MSIgaWQ9IlBhdGgtNCIgc3Ryb2tlLXdpZHRoPSIxLjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLWRhc2hhcnJheT0iMC42LDQuMiI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+'
const ResidualSelected = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMwcHgiIGhlaWdodD0iMzBweCIgdmlld0JveD0iMCAwIDMwIDMwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNTQgKDc2NDgwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4NCiAgICA8dGl0bGU+aWNvblJlc2lkdWFsLU5vcm1hbDwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgaWQ9IlBhZ2UtMiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSI1LTQtNC1Nb2RlbC1TZWxlY3Rpb25fQWR2YW5jZWQtVmlld19Nb2RlbC1FeHBhbmRfUk9DLUN1cmUtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3Ny4wMDAwMDAsIC0zNjAuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTciIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3Ny4wMDAwMDAsIDMxMy4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iaWNvblJlc2lkdWFsLVNlbGVjdGVkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwgNDcuMzMzMzMzKSI+DQogICAgICAgICAgICAgICAgICAgIDxnPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTAuMDgzNzQyNTUwOCwyLjQyNjQwNDE2IEMwLjA4Mzc0MjU1MDgsMS4xMDQ0Mjc2MiAxLjE1OTQ1NTEyLDAuMDMyNzUzODk3OSAyLjQ3NzM5MjgxLDAuMDMyNzUzODk3OSBMMjYuOTQwMDkyMywwLjAzMjc1Mzg5NzkgQzI4LjI2MjA2ODgsMC4wMzI3NTM4OTc5IDI5LjMzMzc0MjYsMS4xMDg0NjY0NiAyOS4zMzM3NDI2LDIuNDI2NDA0MTYgTDI5LjMzMzc0MjYsMjYuODg5MTAzNiBDMjkuMzMzNzQyNiwyOC4yMTEwODAyIDI4LjI1ODAzLDI5LjI4Mjc1MzkgMjYuOTQwMDkyMywyOS4yODI3NTM5IEwyLjQ3NzM5MjgxLDI5LjI4Mjc1MzkgQzEuMTU1NDE2MjgsMjkuMjgyNzUzOSAwLjA4Mzc0MjU1MDgsMjguMjA3MDQxMyAwLjA4Mzc0MjU1MDgsMjYuODg5MTAzNiBMMC4wODM3NDI1NTA4LDIuNDI2NDA0MTYgWiIgaWQ9IlJlY3RhbmdsZS03LUNvcHkiIGZpbGw9IiMxRDJCM0MiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPSJBcnJvdyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMi4yNTAwMDAsIDMuMzc1MDAwKSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMC4yMDg4OTAzODEgTDIuMTE1ODA4MzYsMS4wNDQ0NTE5MSIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMDg4OTAzODEgTDEuMTc1NDQ5MDksMS4wNDQ0NTE5MSIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42MjY2NzEpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42MjY2NzEpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IkFycm93LUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjcwNjkyMywgMjUuMTA4NjkxKSByb3RhdGUoOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTI2LjcwNjkyMywgLTI1LjEwODY5MSkgdHJhbnNsYXRlKDI1LjMwMDY3MywgMjQuMjY0OTQxKSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIiBzdHJva2Utd2lkdGg9IjAuNiI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEuMTc1NDQ5MDksMC4yMDg4OTAzODEgTDIuMTE1ODA4MzYsMS4wNDQ0NTE5MSIgaWQ9IkxpbmUiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC4yMzUwODk4MTgsMC4yMDg4OTAzODEgTDEuMTc1NDQ5MDksMS4wNDQ0NTE5MSIgaWQ9IkxpbmUtQ29weS0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjcwNTI2OSwgMC42MjY2NzEpIHNjYWxlKC0xLCAxKSB0cmFuc2xhdGUoLTAuNzA1MjY5LCAtMC42MjY2NzEpICI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuNDI1NDQ5MDksMjQuODkwNzA5MyBMMjYuOTM0NDMwOSwyNC44OTA3MDkzIiBpZD0iTGluZSIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMuNDI1NDQ5MDksMjQuODkwNzA5MyBMMy40MjU0NDkwOSw0LjAwMTY3MTE0IiBpZD0iTGluZS1Db3B5IiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMC42IiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy43ODY0Mzc5OSwxMy43ODEyNSBMMjYuODI2OTY1MywxMy43ODEyNSIgaWQ9IkxpbmUtNCIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuOSIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNzY5NTM0ODYsMTAuOTM0MzUxNCBMMTAuMjM4MTYyOCwxNy4zODIxODk1IEwxMy41Mjk2NjY3LDEyLjIyMzkxOSBMMTUuMTc1NDE4NywxNS40NDc4MzgxIEwyMC4xMTI2NzQ1LDkgTDExLjg4MzkxNDcsOSBMMjAuMTEyNjc0NSwxNy4zODIxODk1IEwxMy45NDExMDQ3LDE4LjY3MTc1NzEgTDI0LjIyNzA1NDQsMTAuOTM0MzUxNCBMMjQuMjI3MDU0NCwxNS40NDc4MzgxIiBpZD0iUGF0aC00IiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMS4yIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1kYXNoYXJyYXk9IjAuNiw0LjIiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=='

const { TabPane } = Tabs;

@inject('projectStore')
@observer
export default class Score extends Component {

  @observable currentSettingId = 'all';

  @computed
  get filtedModels() {
    const { models, project, projectStore, sort, metric } = this.props;
    let _filtedModels = [...models];

    let { stopFilter, oldfiltedModels } = projectStore;

    const sortMethods = (aModel, bModel) => {
      switch (sort.key) {
        case 'F1-Score':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.F1[aFitIndex]);
            const bModelData = (bModel.chartData.roc.F1[bFitIndex]);
            return (aModelData - bModelData) * sort.value
          }
        case 'Precision':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.Precision[aFitIndex])
            const bModelData = (bModel.chartData.roc.Precision[bFitIndex])
            return (aModelData - bModelData) * sort.value
          }
        case 'Recall':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.Recall[aFitIndex])
            const bModelData = (bModel.chartData.roc.Recall[bFitIndex])
            return (aModelData - bModelData) * sort.value
          }
        case 'LogLoss':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.LOGLOSS[aFitIndex])
            const bModelData = (bModel.chartData.roc.LOGLOSS[bFitIndex])
            return (aModelData - bModelData) * sort.value
          }
        case 'Cutoff Threshold':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.Threshold[aFitIndex])
            const bModelData = (bModel.chartData.roc.Threshold[bFitIndex])
            return (aModelData - bModelData) * sort.value
          }
        case 'Normalized RMSE':
          {
            const aModelData = (aModel.score.validateScore.nrmse)
            const bModelData = (bModel.score.validateScore.nrmse)
            return (aModelData - bModelData) * sort.value
          }
        case 'RMSE':
          {
            const aModelData = (aModel.score.validateScore.rmse)
            const bModelData = (bModel.score.validateScore.rmse)
            return (aModelData - bModelData) * sort.value
          }
        case 'MSLE':
          {
            const aModelData = (aModel.score.validateScore.msle)
            const bModelData = (bModel.score.validateScore.msle)
            return (aModelData - bModelData) * sort.value
          }
        case 'RMSLE':
          {
            const aModelData = (aModel.score.validateScore.rmsle)
            const bModelData = (bModel.score.validateScore.rmsle)
            return (aModelData - bModelData) * sort.value
          }
        case 'MSE':
          {
            const aModelData = (aModel.score.validateScore.mse)
            const bModelData = (bModel.score.validateScore.mse)
            return (aModelData - bModelData) * sort.value
          }
        case 'MAE':
          {
            const aModelData = (aModel.score.validateScore.mae)
            const bModelData = (bModel.score.validateScore.mae)
            return (aModelData - bModelData) * sort.value
          }
        case 'R2':
          {
            const aModelData = (aModel.score.validateScore.r2)
            const bModelData = (bModel.score.validateScore.r2)
            return (aModelData - bModelData) * sort.value
          }
        case 'AdjustR2':
          {
            const aModelData = (aModel.score.validateScore.adjustR2)
            const bModelData = (bModel.score.validateScore.adjustR2)
            return (aModelData - bModelData) * sort.value
          }
        case EN.Validation:
          {
            const { problemType } = project
            let aModelData, bModelData
            if (problemType === 'Regression') {
              aModelData = (aModel.score.validateScore[metric || 'r2'])
              bModelData = (bModel.score.validateScore[metric || 'r2'])
            } else {
              aModelData = metric === 'auc' ? (aModel.score.validateScore[metric]) : (aModel[metric + 'Validation'])
              bModelData = metric === 'auc' ? (bModel.score.validateScore[metric]) : (bModel[metric + 'Validation'])
            }
            return (aModelData - bModelData) * sort.value
          }
        case EN.Holdout:
          {
            const { problemType } = project
            let aModelData, bModelData
            if (problemType === 'Regression') {
              aModelData = (aModel.score.holdoutScore[metric || 'r2'])
              bModelData = (bModel.score.holdoutScore[metric || 'r2'])
            } else {
              aModelData = metric === 'auc' ? (aModel.score.holdoutScore[metric]) : (aModel[metric + 'Holdout'])
              bModelData = metric === 'auc' ? (bModel.score.holdoutScore[metric]) : (bModel[metric + 'Holdout'])
            }
            return (aModelData - bModelData) * sort.value
          }
        case 'KS':
          {
            const aFitIndex = aModel.fitIndex;
            const bFitIndex = bModel.fitIndex;
            const aModelData = (aModel.chartData.roc.KS[aFitIndex]);
            const bModelData = (bModel.chartData.roc.KS[bFitIndex]);
            return (aModelData - bModelData) * sort.value
          }
        case EN.Time:
          return (sort.value === 1 ? 1 : -1) * ((aModel.createTime || 0) - (bModel.createTime || 0))
        case EN.ModelName:
        default:
          return (aModel.modelName > bModel.modelName ? 1 : -1) * (sort.value === 1 ? 1 : -1)
        // const aModelTime = aModel.name.split('.').splice(1, Infinity).join('.');
        // const aModelUnix = moment(aModelTime, 'MM.DD.YYYY_HH:mm:ss').unix();
        // const bModelTime = bModel.name.split('.').splice(1, Infinity).join('.');
        // const bModelUnix = moment(bModelTime, 'MM.DD.YYYY_HH:mm:ss').unix();
        // return this.sortState[currentSort] === 1 ? aModelUnix - bModelUnix : bModelUnix - aModelUnix
      }
    };

    projectStore.changeNewfiltedModels(_filtedModels);
    if (!oldfiltedModels) {
      projectStore.changeOldfiltedModels(_filtedModels);
      oldfiltedModels = _filtedModels;
    }
    if (stopFilter && oldfiltedModels) {
      _filtedModels = oldfiltedModels.sort(sortMethods);
    } else {
      _filtedModels = _filtedModels.sort(sortMethods);
    }

    if (this.currentSettingId === 'all') return _filtedModels;
    const currentSetting = project.settings.find(setting => setting.id === this.currentSettingId)
    if (currentSetting && currentSetting.models && currentSetting.models.length > 0)
      return _filtedModels.filter(model => currentSetting.models.find(id => model.id === id))
    return _filtedModels
  }

  @computed
  get performance() {
    try {
      const { project } = this.props;
      const { selectModel: current } = project;
      if (project.problemType === 'Classification') {
        return current ? (current.score.validateScore.auc > 0.8 && EN.GOOD) || (current.score.validateScore.auc > 0.6 && EN.OK) || EN.NotSatisfied : ''
      } else {
        return current ? (current.score.validateScore.r2 > 0.5 && EN.Acceptable) || EN.NotAcceptable : ''
      }
    } catch (e) {
      return 'OK'
    }
  }

  @computed
  get metricOptions() {
    const { project } = this.props
    if (project && project.problemType) {
      return project.problemType === 'Classification' ? [{
        display: 'Accuracy',
        key: 'acc'
      }, {
        display: 'AUC',
        key: 'auc'
      }, {
        display: 'F1',
        key: 'f1'
      }, {
        display: 'Precision',
        key: 'precision'
      }, {
        display: 'Recall',
        key: 'recall'
      }] : [{
        display: 'MSE',
        key: 'mse'
      }, {
        display: 'RMSE',
        key: 'rmse'
      }, {
        display: <div>R<sup>2</sup></div>,
        key: 'r2'
      }]
    }
    return []
  }

  changeSetting = action((settingId) => {
    this.currentSettingId = settingId
  });

  constructor(props) {
    super(props);
    props.projectStore.changeOldfiltedModels(undefined)
  }

  render() {
    const { project, sort, handleSort, metric } = this.props;
    const { problemType,selectModel: current } = project;
    const currMetric = this.metricOptions.find(m => m.key === (metric || (problemType === 'Classification' ? 'auc' : 'r2'))) || {};
    
    let currentPerformance = '';
    if(problemType === 'MultiClassification'){
      currentPerformance = current
        ? (current.chartData.roc_auc.macro > 0.8 && EN.GOOD) ||
        (current.chartData.roc_auc.macro > 0.6 && EN.OK) ||
        EN.NotSatisfied : '';
    }else{
      currentPerformance = this.performance;
    }
    return (
      <div className={styles.advancedModelResult}>
        <div className={styles.modelResult} >
          {EN.ModelingResults} :{' '}
          <div className={styles.status}>&nbsp;&nbsp;{currentPerformance}</div>
        </div>
        <div className={styles.middle}>
          {project.problemType === 'Classification' && <ModelComp project={project} models={this.filtedModels} />}
        </div>
        <AdvancedModelTable {...this.props} models={this.filtedModels} project={project} sort={sort} handleSort={handleSort} metric={currMetric} />
      </div>
    )
  }
}
class Row extends Component {
  render() {
    const { children, rowStyle, ...other } = this.props;
    return (
      <div className={styles.adrow} style={rowStyle} {...other} >
        {children}
      </div>
    );
  }
}

@observer
class PredictTable extends Component {
  @observable showCost = false
  @observable costOption = { ...this.props.project.costOption };
  @observable showTip = false;
  @observable distribution = this.props.project.distribution || ''
  totalLines = this.props.project.totalLines;
  onChange = e => {
    const criteria = e.target.value;
    this.showCost = criteria === 'cost';
    this.showTip = false;
    const data = { criteria };
    if (!this.showCost) {
      const { models } = this.props;
      data.selectId = '';
      models.forEach(m => {
        if (!m.initialFitIndex) return
        m.updateModel({ fitIndex: m.initialFitIndex })
      })
    } else {
      this.handleSubmit()
    }
    this.props.project.updateProject(data);
  };

  costInput = (row, col) => {
    const { project } = this.props
    const isCost = row !== col
    const field = (row === col ? "T" : "F") + (col === 1 ? "P" : "N");
    return <div className={styles.costTd}>
      <div className={classnames(styles.costColor, styles[`cost${row}${col}`])} />
      <div className={styles.costName}><span>{isCost ? EN.Cost : EN.Benefit}</span></div>
      <div className={styles.costInput}><NumberInput value={project.costOption[field]} onBlur={this.handleChange.bind(null, field)} min={0} max={100} isInt={true} /></div>
      <div className={styles.costUnits}><span>{EN.Units}</span></div>
    </div>
  };

  handleChange = (field, value) => {
    const { project } = this.props;
    project.costOption[field] = value
  };

  handleSubmit = () => {
    const { project } = this.props;
    const { models } = project;
    const { targetCounts } = project
    // const { TP, FN, FP, TN } = this.costOption;
    const [v0, v1] = Object.values(targetCounts)
    const percent0 = parseFloat(formatNumber(v1 / (v0 + v1), 4))
    const percentNew = typeof this.distribution === 'number' ? this.distribution / 100 : percent0
    models.forEach(m => {
      const benefit = m.getBenefit(TP, FN, FP, TN, percentNew, percent0)
      if (benefit.index !== m.fitIndex) m.updateModel({ fitIndex: benefit.index })
    });
    project.updateProject({ costOption: { ...this.costOption }, selectId: '', distribution: this.distribution })
  };

  reset = () => {
    const { project } = this.props;
    const { models } = project
    const [v0, v1] = Object.values(targetCounts)
    const percent = parseInt(v1 / (v0 + v1) * 10000, 0)
    this.distribution = percent / 100
    this.costOption = { TP: 0, FN: 0, FP: 0, TN: 0 }

    // models.forEach(m => {
    //   if (!m.initialFitIndex) return
    //   m.updateModel({ fitIndex: m.initialFitIndex })
    // })
    // project.updateProject({ costOption: { ...this.costOption }, selectId: '', distribution: this.distribution })
  };
  render() {
    // const { model, yes, no, project } = this.props;
    // console.log(this.props , 'sdasdasdsadsd')
    // const { fitIndex, chartData } = model;
    // const current = model
    // const { TP: cTP, FN: cFN, FP: cFP, TN: cTN } = project.costOption
    // let TN = chartData.roc.TN[fitIndex];
    // let FP = chartData.roc.FP[fitIndex];
    // let TP = chartData.roc.TP[fitIndex];
    // let FN = chartData.roc.FN[fitIndex];

    // set default value

  
    const { project = {}, model, yes, no } = this.props;
    const { fitIndex, chartData } = model;
    let TN = chartData.roc.TN[fitIndex];
    let FP = chartData.roc.FP[fitIndex];
    let TP = chartData.roc.TP[fitIndex];
    let FN = chartData.roc.FN[fitIndex];
    const { train2Finished, trainModel, abortTrain, selectModel: current, recommendModel, criteria, targetColMap, targetArrayTemp, renameVariable, isAbort, distribution } = project;
    if (!current) return null;

    const { selectModel = {}, targetCounts = {} } = project;

    // const { fitIndex = 1, chartData = {} } = selectModel;
    const { roc = {} } = chartData;

    const Threshold = roc.Threshold && roc.Threshold[fitIndex] || -1;

    const tc = Object.values(targetCounts);
    // const event = (tc[1] / (tc[0] + tc[1]) * 100).toFixed(3);
    const event = parseInt(tc[1] / (tc[0] + tc[1]) * 10000, 0)
    const target = project.targetArray.length ? project.targetArray : Object.keys(project.targetColMap);

    let events = target[1];

    let _target = project.renameVariable[events];
    if (_target) {
      events = _target;
    }

    const currentPerformance = current ? (current.score.validateScore.auc > 0.8 && EN.GOOD) || (current.score.validateScore.auc > 0.6 && EN.OK) || EN.NotSatisfied : '';
    const [v0, v1] = !targetArrayTemp.length ? Object.keys(targetColMap) : targetArrayTemp;
    // const [no, yes] = [renameVariable[v0] || v0, renameVariable[v1] || v1];
    const text = (criteria === 'cost' && (TP | FN || FP || TN)) ? EN.BenefitCost : EN.Recommended;
    const curBenefit = current.getBenefit(TP, FN, FP, TN, typeof distribution === 'number' ? (distribution / 100) : (event / 10000), event / 10000)





    const column = [{
      title: '',
      dataIndex: 'rowName',
      className: styles.actual
    }, {
      title: `${EN.Predict}: ${no}`,
      dataIndex: 'col1',
    }, {
      title: `${EN.Predict}: ${yes}`,
      dataIndex: 'col2'
    }, {
      title: '',
      dataIndex: 'sum'
    }];

    // set default value
    const data = [{
      rowName: `${EN.Actual}: ${no}`,
      col1: `${Math.round(TN)}(TN)`,
      col2: `${Math.round(FP)}(FP)`,
      sum: +TN + +FP,
    }, {
      rowName: `${EN.Actual}: ${yes}`,
      col1: `${Math.round(FN)}(FN)`,
      col2: `${Math.round(TP)}(TP)`,
      sum: Number(FN) + +TP
    }, {
      rowName: '',
      col1: +TN + +FN,
      col2: +FP + +TP,
      sum: +TN + +FN + +FP + +TP
    }];


    console.log(data, '--------------------------', project.criteria, '123.js')

    return (
      <div className={styles.costbase}>
        <Table
          className={styles.predictTable}
          columns={column}
          bordered
          rowKey={re => {
            return re.rowName;
          }}
          dataSource={data}
          pagination={false} />

        {
          project.criteria === 'cost' ? <div className={styles.costBlock}>
            {/*<div className={styles.costClose} onClick={this.onHide}><span>+</span></div>*/}
            <section className={styles.newTitle}>
              <label>{EN.Input}</label>
              <dl>
                <dt>
                  <span>{EN.Basedonyourbizscenario}</span>
                  <span><span style={{ display: 'block' }}><b>{EN.A}</b>{EN.Pleaseenterbenefitandcostin}</span></span>
                  <span><span style={{ display: 'block' }}><b>{EN.B}</b>{EN.Noteifacorrectpredictionbringsyouprofit}</span></span>
                </dt>
              </dl>
              <dl style={{ margin: '0.1em 0' }}>
                <dt>
                  <div className={styles.eventInput}>
                    <span style={{ marginRight: '0.5em' }}>{EN.EventDistribution}</span>
                    <span>{typeof this.distribution === 'number' ? this.distribution : (event / 100)} </span>
                    {/*<NumberInput value={typeof this.distribution === 'number' ? this.distribution : (event / 100)} min={0.00} max={100.00} isInt={false} digits={2} cut={true} />*/}
                    <span style={{ marginLeft: '0.5em' }}>%</span>
                    {/*<span style={{ marginLeft: '10px' }}><a className={styles.reset} onClick={this.reset}>{EN.Reset}</a></span>*/}
                  </div>
                </dt>
                <div className={styles.eventButton}>
                  {/*<a*/}
                  {/*  className={styles.myButton}*/}
                  {/*  href="javascript:;" onClick={() => {*/}
                  {/*  this.showTip = true;*/}
                  {/*}*/}
                  {/*}>{EN.Tips}</a>*/}
                </div>
              </dl>
            </section>
            <div className={styles.costBox}>
              <div className={styles.costTable}>
                <div className={styles.costRow}>
                  <div className={styles.costName}>
                    <div className={classnames(styles.costColor, styles.cost1)} />
                    <span>{EN.Benefit}</span>
                  </div>
                  <div className={styles.costCell}>{this.costInput(1, 1)}</div>
                  <div className={styles.costCell}>{this.costInput(0, 0)}</div>
                </div>
                <div className={styles.costRow}>
                  <div className={styles.costName}>
                    <div className={classnames(styles.costColor, styles.cost2)} />
                    <span>{EN.Cost}</span>
                  </div>
                  <div className={styles.costCell}>{this.costInput(1, 0)}</div>
                  <div className={styles.costCell}>{this.costInput(0, 1)}</div>
                </div>
              </div>
            </div>
            {!!(TP || FN || FP || TN) && <div className={styles.costTextBox}>
              <div><span className={styles.newStext}><b>{EN.Resultbasedonthedataset}{`<${typeof distribution === 'number' ? distribution : (event / 100)}%>`}{EN.Events}</b></span></div>
              <div style={{ display: (Threshold !== -1 ? '' : 'none') }}><span className={styles.newStext}>{EN.Theoptimalthreshold}{`<${formatNumber(Threshold, 3)}>`}</span></div>
              <div style={{ display: (Threshold !== -1 ? '' : 'none') }}><span className={styles.newStext}>{EN.Theoverallbenefit}{`<${curBenefit.benefit > Math.pow(10, 7) ? curBenefit.benefit.toPrecision(3) : formatNumber(curBenefit.benefit, 2)}>`}</span></div>
              {/* <div className={styles.costText}><span>{curBenefit.text}</span></div> */}
            </div>}
            {/*<div className={styles.costButton}>*/}
            {/*  <button onClick={this.handleSubmit}><span>{EN.Submit}</span></button>*/}
            {/*</div>*/}
          </div> : null
        }





        {/*<div className={styles.costBlock}>*/}
        {/*  <div className={styles.costBox}>*/}
        {/*    <div className={styles.costTable}>*/}
        {/*      <div className={styles.costRow}>*/}
        {/*        <div className={styles.sepCell}>*/}
        {/*          <div className={styles.sepText} style={{ marginLeft: 'auto' }}><span title={EN.Predicted}>{EN.Predicted}</span></div>*/}
        {/*          <div className={styles.sep}><span></span></div>*/}
        {/*          <div className={styles.sepText} style={{ marginRight: 'auto' }}><span title={EN.Actual}>{EN.Actual}</span></div>*/}
        {/*        </div>*/}
        {/*        <div className={classnames(styles.costCell, styles.costCellCenter)}><span title={yes}>{yes}</span></div>*/}
        {/*        <div className={classnames(styles.costCell, styles.costCellCenter)}><span title={no}>{no}</span></div>*/}
        {/*      </div>*/}
        {/*      <div className={styles.costRow}>*/}
        {/*        <div className={classnames(styles.costCell, styles.costCellSmall)}><span title={yes}>{yes}</span></div>*/}
        {/*        <div className={styles.costCell}>{this.costInput(1, 1)}</div>*/}
        {/*        <div className={styles.costCell}>{this.costInput(1, 0)}</div>*/}
        {/*      </div>*/}
        {/*      <div className={styles.costRow}>*/}
        {/*        <div className={classnames(styles.costCell, styles.costCellSmall)}><span title={no}>{no}</span></div>*/}
        {/*        <div className={styles.costCell}>{this.costInput(0, 1)}</div>*/}
        {/*        <div className={styles.costCell}>{this.costInput(0, 0)}</div>*/}
        {/*      </div>*/}
        {/*    </div>*/}
        {/*  </div>*/}
        {/*  {!!(cTP || cFN || cFP || cTN) && <div className={styles.costTextBox}>*/}
        {/*    /!* <div className={styles.costText}><span>The best benefit score based on 3616 row samples size:</span></div> *!/*/}
        {/*    <div className={styles.costText}><span>{current.getBenefit(cTP, cFN, cFP, cTN).text}</span></div>*/}
        {/*  </div>}*/}
        {/*  <div className={styles.costButton}>*/}
        {/*    <button onClick={this.handleSubmit}><span>{EN.Submit}</span></button>*/}
        {/*  </div>*/}
        {/*</div>*/}
      </div>
    );
  }
}

export { PredictTable }



